var firebaseConfig={ __FIREBASE_CONFIGURATION__ };let email,displayName,emailVerfiedStatus;firebase.initializeApp(firebaseConfig),firebase.analytics();let emailText=$(".userEmail"),nameText=$(".userName"),submitBtn=$(".btnSubmit"),heading=$(".heading"),displayImage=$("#emailConfirm"),timer=$(".timer"),resend=$(".resend");function displayEmailImage(type){0==type?$(displayImage).attr("src","img/mailbox.svg"):$(displayImage).attr("src","img/mailVerified.svg")}firebase.auth().onAuthStateChanged((function(user){if(user){if(email=user.email,displayName=user.displayName,emailVerfiedStatus=user.emailVerified,$(emailText).text(email),$(nameText).text(displayName),emailVerfiedStatus){function cssSet(element,elementS,state,stateS){$(element).css({display:state}),$(elementS).css({display:stateS})}$(resend).css("display","none"),heading.text("Email Confirmed"),displayImage.src="img/mailVerified.svg",submitBtn.text("PLease Wait"),displayEmailImage(!0),cssSet(".beforeConfirmation",".afterConfirmation","none","flex");let timerValue=5;setInterval(()=>{0==timerValue?window.location.replace("../"):(timer.text(timerValue),timerValue--)},1e3)}else displayEmailImage(!1);$(resend).click((function(e){if(e.preventDefault(),emailVerfiedStatus)$(resend).text("Email already verified!");else{let user=firebase.auth().currentUser;sendVerificationEmail(user).then(response=>{$(resend).text("Email Sent"),setTimeout(()=>{$(resend).text("CONFIRM")},5e3)}).catch(error=>{authError(".resend",error.code)})}}));var sendVerificationEmail=user=>new Promise((res,rej)=>{user.sendEmailVerification().then(response=>{console.log(response),res(response)}).catch(error=>{console.log(error),rej(error)})});function authError(button,errorCode){$(button).text(errorCode),setTimeout((function(){"#SignInBtn"==button?$(button).text("Sign In"):"#SignUpbtn"==button?$(button).text("Sign Up"):$(button).text("Send Email")}),6e3)}}else window.location.replace("createAccount.html?location=signin");$(submitBtn).click((function(e){e.preventDefault(),window.location.reload()}))}));
